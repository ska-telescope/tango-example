# Test case (5):
# - Run a device server that runs a device that already
#   exists, with the same server name
#
# Expected behavior:
# - The device server resources should be in a "pending" state and information
#   about why is it pending deployment available, or not allowed at all
#
# Behavior with ska-tango-util:
# - Json2Tango reports the following:
#   '''
#   @conflict config job
#   dsconfig Summary:
#   dsconfig Add 2 servers.
#   dsconfig Add 2 devices to 2 servers.
#   dsconfig Add/change 6 device properties in 1 devices.
#   '''
# - Although, only 'conflict2' appears well configured, despite
#   both servers existing
# - 'conflict2' starts and functions properly, but not
#   'conflict1' which displays an error message but DOES NOT
#   crash or errors out: 'Unknown exception while trying to fill database cache'
#
# Behavior with the ska-tango-operator:
# - Missing operator tests to analyze current behavior
#
instances: ["conflict1", "conflict2"]
entrypoints:
  - name: "HelloWorld.HelloWorld"
    path: "/app/src/ska_tango_examples/operator/HelloWorld.py"
server:
  instances:
    - name: "conflict1"
      classes:
      - name: "HelloWorld"
        devices:
        - name: "operator/conflict/1"
          properties:
          - name: "LOGGING_LEVEL"
            values:
            - "DEBUG"
          - name: "message"
            values:
            - "Hello TANGO World, I'm conflict1"
          - name: "sleep_time"
            values:
            - "2"
    - name: "conflict2"
      classes:
      - name: "HelloWorld"
        devices:
        - name: "operator/conflict/1"
          properties:
          - name: "LOGGING_LEVEL"
            values:
            - "DEBUG"
          - name: "message"
            values:
            - "Hello TANGO World, I'm conflict2"
          - name: "sleep_time"
            values:
            - "5"
