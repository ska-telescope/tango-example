display: ":0"
xauthority: "~/.Xauthority"

enabled: true

system: SW-infrastructure
subsystem: tango-example
telescope: SKA-mid

labels:
  app: tango-example
annotations:
  app.gitlab.com/app: CI_PROJECT_PATH_SLUG
  app.gitlab.com/env: CI_ENVIRONMENT_SLUG

global:
  minikube: true
  tango_host: databaseds-tango-base-test:10000

dsconfig:
  configuration_file: data/configuration.json
  image:
      registry: nexus.engageska-portugal.pt/ska-docker
      image: tango-dsconfig
      tag: 1.5.0
      pullPolicy: IfNotPresent

itango:
  image:
    registry: nexus.engageska-portugal.pt/ska-docker
    image: tango-itango
    tag: 9.3.1
    pullPolicy: IfNotPresent

tango_example:
  image:
    registry: nexus.engageska-portugal.pt/ska-docker
    image: tango-example
    tag: 0.3.0
    pullPolicy: IfNotPresent

resources:
  limits:
    cpu: 300m
    memory: 500Mi
  requests:
    cpu: 100m
    memory: 128Mi

deviceServers:
  - name: powersupply
    function: tango-example-powersupply
    domain: tango-example
    command: "/usr/bin/python /app/module_example/powersupply.py "
    instances: ["test", "test2"]
    depends_on:
      - device: sys/database/2
    image:
      registry: "{{.Values.tango_example.image.registry}}"
      image: "{{.Values.tango_example.image.image}}"
      tag: "{{.Values.tango_example.image.tag}}"
      pullPolicy: "{{.Values.tango_example.image.pullPolicy}}"
  - name: motor
    function: tango-example-motor
    domain: tango-example
    command: "/usr/bin/python /app/module_example/Motor.py"
    instances: ["test"]
    depends_on:
      - device: test/power_supply/1
    image:
      registry: "{{.Values.tango_example.image.registry}}"
      image: "{{.Values.tango_example.image.image}}"
      tag: "{{.Values.tango_example.image.tag}}"
      pullPolicy: "{{.Values.tango_example.image.pullPolicy}}"
  - name: webjivetestdevice
    function: tango-example-webjivetestdevice
    domain: tango-example
    command: "/usr/bin/python /app/module_example/WebjiveTestDevice.py"
    instances: ["test"]
    depends_on:
      - device: sys/database/2
    image:
      registry: "{{.Values.tango_example.image.registry}}"
      image: "{{.Values.tango_example.image.image}}"
      tag: "{{.Values.tango_example.image.tag}}"
      pullPolicy: "{{.Values.tango_example.image.pullPolicy}}"
  - name: calendarclock
    function: tango-example-calendarclock
    domain: tango-example
    command: "/usr/bin/python /app/module_example/CalendarClock.py"
    instances: ["test"]
    depends_on:
      - device: sys/database/2
    image:
      registry: "{{.Values.tango_example.image.registry}}"
      image: "{{.Values.tango_example.image.image}}"
      tag: "{{.Values.tango_example.image.tag}}"
      pullPolicy: "{{.Values.tango_example.image.pullPolicy}}"
  - name: eventreceiver
    function: tango-example-eventreceiver
    domain: tango-example
    command: "/usr/bin/python /app/module_example/EventReceiver.py"
    instances: ["test"]
    depends_on:
      - device: test/motor/1
    image:
      registry: "{{.Values.tango_example.image.registry}}"
      image: "{{.Values.tango_example.image.image}}"
      tag: "{{.Values.tango_example.image.tag}}"
      pullPolicy: "{{.Values.tango_example.image.pullPolicy}}"
  - name: logtestupstream
    function: tango-example-logtestupstream
    domain: tango-example
    command: "/usr/bin/python /app/module_example/LogTestUpstream.py"
    instances: ["test"]
    depends_on:
      - device: sys/database/2
    image:
      registry: "{{.Values.tango_example.image.registry}}"
      image: "{{.Values.tango_example.image.image}}"
      tag: "{{.Values.tango_example.image.tag}}"
      pullPolicy: "{{.Values.tango_example.image.pullPolicy}}"
    environment_variables:
      - name: SKUID_URL
        value: skuid-skuid-integration-test.integration.svc.cluster.local:9870
  - name: logtestdownstream
    function: tango-example-logtestdownstream
    domain: tango-example
    command: "/usr/bin/python /app/module_example/LogTestDownstream.py"
    instances: ["test"]
    depends_on:
      - device: sys/database/2
    image:
      registry: "{{.Values.tango_example.image.registry}}"
      image: "{{.Values.tango_example.image.image}}"
      tag: "{{.Values.tango_example.image.tag}}"
      pullPolicy: "{{.Values.tango_example.image.pullPolicy}}"
    environment_variables:
      - name: SKUID_URL
        value: skuid-skuid-integration-test.integration.svc.cluster.local:9870
  - name: multidevice
    function: tango-example-multidevice
    domain: tango-example
    command: "/usr/bin/python /app/module_example/MultiDevice.py"
    instances: ["test"]
    depends_on:
      - device: sys/database/2
    image:
      registry: "{{.Values.tango_example.image.registry}}"
      image: "{{.Values.tango_example.image.image}}"
      tag: "{{.Values.tango_example.image.tag}}"
      pullPolicy: "{{.Values.tango_example.image.pullPolicy}}"
    environment_variables:
      - name: SKUID_URL
        value: skuid-skuid-integration-test.integration.svc.cluster.local:9870

nodeSelector: {}

affinity: {}

tolerations: []
